<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>个人笔记 - Sheng Li&#39;s Blog</title>
    <meta charset="utf-8" />
    <meta name="author" content="ShengLi" />
    <meta name="description" content="一些问题的解决方法" />
    <meta name="keywords" content="&lt;TODO: insert your keywords here&gt;" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">Sheng Li&#39;s Blog</a></h1>
        <p>Ultimated Blade Works</p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/wiki/">Wiki</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="https://github.com/qcl6355">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="//www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="as_sitesearch" value="qcl6355.github.io">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>个人笔记</h1>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2">MXNet编译相关</h2>
<div class="outline-text-2" id="text-orgheadline2">
</div><div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1">no 'return_type' compile error</h3>
<div class="outline-text-3" id="text-orgheadline1">
<p>
可能是子模块的版本不对应造成的，解决方法：git pull &amp; git submodule update &amp; make clean &amp; make -j
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3">D3可视化学习</h2>
<div class="outline-text-2" id="text-orgheadline3">
<ol class="org-ol">
<li>动态效果</li>
</ol>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">方法</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">transition()</td>
<td class="org-left">状态转移</td>
</tr>

<tr>
<td class="org-left">duration()</td>
<td class="org-left">指定过渡的持续时间，单位为毫秒</td>
</tr>

<tr>
<td class="org-left">ease()</td>
<td class="org-left">指定过渡的方式（linear, circle, elastic, bounce）</td>
</tr>

<tr>
<td class="org-left">delay()</td>
<td class="org-left">指定延迟的时间，表示一定时间后才开始转变</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-javascript">var circle1 = svg.append("circle")
    .attr("cx", 100)
    .attr("cy", 100)
    .attr("r", 45)
    .style("fill", "green")

circle1.transition()
    .duration(1000)
    .attr("cx", 300)
    .style("fill", "steelblue")
</pre>
</div>

<ol class="org-ol">
<li>理解Update, Enter, Exit的用法</li>
</ol>
<p>
处理选择的元素和数据的数量关系不确定的情况
update表示对齐的部分
</p>
<ol class="org-ol">
<li>元素的个数 &lt; 数据的个数， 使用enter，添加元素</li>
<li>元素的个数 &gt; 数据的个数， 使用exit，删除元素</li>
</ol>

<div class="org-src-container">

<pre class="src src-javascript">// 假定body里面有三个p元素

var dataset = [3, 6, 9, 12, 15];

// 选择body中的p元素
var p = d3.select("body").selectAll("p");

// 获取update部分
var update = p.data(dataset);

// 获取enter部分
var enter = update.enter();
// 如果元素p的个数大于dataset的个数时
var exit = update.exit();

// update部分的处理：更新属性值
update.text(function(d) {
    return "update " + d;
});

// enter部分的处理；添加元素后赋予属性值
enter.append("p")
    .text(function(d) {
	return "enter " + d;
    });
</pre>
</div>

<ol class="org-ol">
<li>交互式操作</li>
</ol>
<p>
在d3中，每一个选择集都有on()函数，用于添加事件监听器。
</p>
<div class="org-src-container">

<pre class="src src-javascript">var circle = svg.append("circle")

circle.on("click", function(){
    //add some processing code
});
</pre>
</div>

<ol class="org-ol">
<li>布局（layout）</li>
</ol>
<p>
Layout: 决定什么元素绘制在哪里
数据-&gt;布局-&gt;获得绘图所需的数据-&gt;在画布上添加相应的图形-&gt;图表
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Layout</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Pie</td>
<td class="org-left">饼状图</td>
</tr>

<tr>
<td class="org-left">Force</td>
<td class="org-left">力导向图</td>
</tr>

<tr>
<td class="org-left">Chord</td>
<td class="org-left">弦图</td>
</tr>

<tr>
<td class="org-left">Tree</td>
<td class="org-left">树状图</td>
</tr>

<tr>
<td class="org-left">Cluster</td>
<td class="org-left">集群图</td>
</tr>

<tr>
<td class="org-left">Bundle</td>
<td class="org-left">捆图</td>
</tr>

<tr>
<td class="org-left">Pack</td>
<td class="org-left">打包图</td>
</tr>

<tr>
<td class="org-left">Histogram</td>
<td class="org-left">直方图</td>
</tr>

<tr>
<td class="org-left">Partition</td>
<td class="org-left">分区图</td>
</tr>

<tr>
<td class="org-left">Stack</td>
<td class="org-left">堆栈图</td>
</tr>

<tr>
<td class="org-left">Treemap</td>
<td class="org-left">矩阵树图</td>
</tr>

<tr>
<td class="org-left">Hierarchy</td>
<td class="org-left">层级图</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-2">
<h2 id="orgheadline4">随机优化技术</h2>
<div class="outline-text-2" id="text-orgheadline4">
<ol class="org-ol">
<li>Stochastic Gradient Descent (SGD)
SGD simply updates each parameter by substracting the gradient of
the loss w.r.t the parameter, scaled by the learning rate \(\eta\), a
hyperparameter. If \(\eta\) is too large, SGD will diverge; if it's
too small, it will converge slowly. The update rule is simply \[
   \theta_{t+1} = \theta_{t} - \eta \nabla L(\theta{t}) \]</li>

<li>Momentum (动量)
In SGD, the gradient \(\nabla L(\theta_{t})\) often changes rapidlly
at each iteration \(t\) due to the fact that the loss is being
computed over different data. This is often partially mitigated by
re-using the gradient value from the previous iteration, scaled by
a momentum hyperparameter \(\mu\), as follows:
\[ v_{t+1} = \mu v_{t} - \eta \nabla L(\theta{t})\]
\[ \Theta_{t+1} = \theta_{t} + v_{t+1} \]
It has been argued that including the previous gradient step has
the effect of approximating some second-order information about the
gradient.</li>

<li>Nesterov's Accelerated Gradient (NAG)</li>

<li>AdaGrad
Adagrad effectively rescales the learning rate for each parameter
according to the history of the gradients for that parameter. This
is done by dividing each item in \(\nabla L\) by the squares root of
the sum of squares of its historical gradient. Rescaling in this
way effectively lowers the learning rate for parameters which
consistently have large gradient values. It also effectively
decreases the learning rate over time, because the sum of squares
will continue to grow with the iteration. After setting the
rescaling term g = 0, the updates are as follows:
\[ g_{t+1} = g_{t} + \nabla L(\theta_{t})^{2} \]
\[ \theta_{t+1} = \theta_{t} - \frac{\eta \nabla
   L(\theta_{t})}{\sqrt{g_{t+1}} + \epsilon} \]
where division is elementwise and \(\epsilon\) is a small constant
included for numerical stability.</li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-2">
<h2 id="orgheadline5">rabit框架使用总结</h2>
<div class="outline-text-2" id="text-orgheadline5">
<ol class="org-ol">
<li>Allreduce peforms reduction across different computation nodes and</li>
</ol>
<p>
returns the result to every node.
</p>
<ol class="org-ol">
<li>Broadcast is another method, this function allows one node to broadcast</li>
</ol>
<p>
its local data to all other nodes.
</p>
<div class="org-src-container">

<pre class="src src-c++">#include &lt;rabit.h&gt;

int main(int argc, char *argv[]) {
  rabit::Init(argc, argv);
  // load the latest checked model
  int version = rabit::LoadCheckPoint(&amp;model);

  // initialize the model if it is the first version
  if (version == 0) model.InitModel();
  // the version number marks the iteration to resume
  for (int iter = version; iter &lt; max_iter; ++iter) {
    // at this point, the model object should allow us to recover the program state

    // each iteration can contain multiple calls of allreduce/broadcast
    rabit::Allreduce&lt;rabit::op::Max&gt;(&amp;data[0], n);

    // checkpoint model after one iteration finishes
    rabit::Checkpoint(&amp;model);
  }
  rabit::Finalize();
  return 0;
}
</pre>
</div>
</div>
</div>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2016-03-27</span>
        <span title="last modification date" class="post-info">2016-03-27</span>
        <span title="tags" class="post-info"><a href="/tags/emacs/">Emacs</a>, <a href="/tags/mxnet/">MXNet</a>, <a href="/tags/c++/">C++</a>, <a href="/tags/java/">Java</a>, <a href="/tags/javascript/">Javascript</a>, <a href="/tags/rabit/">Rabit</a></span>
        <span title="author" class="post-info">ShengLi</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/2016/03/27/个人笔记";
          var disqus_url = "http://qcl6355.github.io/blog/2016/03/27/个人笔记";
          var disqus_shortname = 'Sheng';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </section>
      <script src="//code.jquery.com/jquery-latest.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="/media/js/main.js"></script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.x (<a href="http://orgmode.org">Org mode</a> 8.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:qcl6355 &lt;at&gt; gmail &lt;dot&gt; com">ShengLi</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
